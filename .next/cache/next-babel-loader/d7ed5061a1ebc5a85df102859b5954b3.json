{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\FJGS_\\\\OneDrive\\\\Desktop\\\\tienda_react\\\\pages\\\\index.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport Nav from '../components/Nav';\nimport Cart from '../components/Cart';\nimport ItemList from '../components/ItemList';\nimport ITEMS_DB from '../js/constants';\n\nvar Index = function Index() {\n  _s();\n\n  var _useState = useState([]),\n      shoppingCart = _useState[0],\n      setShoppingCart = _useState[1];\n\n  var _useState2 = useState(shoppingCart.length == 0 ? \"0.00\" : shoppingCart.map(function (e) {\n    return e.price * e.ud;\n  }).reduce(function (e, acc) {\n    return e + acc;\n  }).toFixed(2)),\n      totalPrice = _useState2[0],\n      setTotalPrice = _useState2[1];\n\n  useEffect(function () {\n    var totalItems = document.getElementById(\"cart-count\");\n    var priceCart = document.getElementById(\"totalPrice\");\n    document.title = \"Amazon.fake\";\n    totalItems.innerHTML = shoppingCart.length;\n    totalItems.style.left = shoppingCart.length > 9 ? \"21px\" : \"25px\";\n    setTotalPrice(shoppingCart.length == 0 ? \"0.00\" : shoppingCart.map(function (e) {\n      return e.price * e.ud;\n    }).reduce(function (e, acc) {\n      return e + acc;\n    }).toFixed(2));\n    priceCart.innerHTML = \"Total a pagar: \".concat(totalPrice, \"\\u20AC\");\n  });\n\n  var setUnitItem = function setUnitItem(id, ud) {\n    var NEW_CART = _toConsumableArray(shoppingCart);\n\n    NEW_CART.find(function (e) {\n      return e.id == id;\n    }).ud = ud; //shoppingCart.filter( e => e.id == id )[0].ud = ud;\n    //setShoppingCart( shoppingCart );\n\n    setShoppingCart(NEW_CART); //setTotalPrice( shoppingCart.length == 0 ? \"0.00\" : shoppingCart.map( e => e.price*e.ud ).reduce( (e,acc) => e+acc ).toFixed(2) );\n  };\n\n  var deleteItem = function deleteItem(id) {\n    var ITEM = ITEMS_DB.find(function (e) {\n      return e.id == id;\n    });\n    setShoppingCart(shoppingCart.filter(function (e) {\n      return e.id !== id;\n    }));\n    setTotalPrice((totalPrice - shoppingCart.filter(function (e) {\n      return e.id == id;\n    }).map(function (e) {\n      return e.price * e.ud;\n    })).toFixed(2));\n    ITEM.ud = 1;\n    ITEM.intoCart = false;\n  };\n\n  var emptyCart = function emptyCart() {\n    shoppingCart.map(function (e) {\n      return deleteItem(e.id);\n    });\n    setShoppingCart([]);\n    setTotalPrice(\"0.00\");\n  };\n\n  var addItem = function addItem(item) {\n    ITEMS_DB.find(function (e) {\n      return e.id == item.id;\n    }).intoCart = true;\n    shoppingCart.push(ITEMS_DB.filter(function (e) {\n      return e.id == item.id;\n    })[0]); //No sé la razón, pero si no hago este push el array no se actualiza a tiempo y el precio no cambia, porqué ocurre esto???\n\n    setShoppingCart(shoppingCart);\n    setTotalPrice(shoppingCart.map(function (e) {\n      return e.price * e.ud;\n    }).reduce(function (e, acc) {\n      return e + acc;\n    }).toFixed(2));\n  };\n\n  return __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, __jsx(Nav, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }), __jsx(Cart, {\n    cart: shoppingCart,\n    deleteItem: deleteItem,\n    setUnitItem: setUnitItem,\n    emptyCart: emptyCart,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }\n  })), __jsx(\"div\", {\n    className: \"main-container scroll\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"container-list\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, ITEMS_DB.map(function (e, i) {\n    return __jsx(ItemList, {\n      db: ITEMS_DB,\n      item: e,\n      key: e.id,\n      id: e.id,\n      addItem: addItem,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 48\n      }\n    });\n  }))));\n};\n\n_s(Index, \"iOyqpBvlQeTUguq0oe6Oeggav1w=\");\n\n_c = Index;\nexport default Index;\n\nvar _c;\n\n$RefreshReg$(_c, \"Index\");","map":{"version":3,"sources":["C:/Users/FJGS_/OneDrive/Desktop/tienda_react/pages/index.js"],"names":["React","useEffect","useState","Nav","Cart","ItemList","ITEMS_DB","Index","shoppingCart","setShoppingCart","length","map","e","price","ud","reduce","acc","toFixed","totalPrice","setTotalPrice","totalItems","document","getElementById","priceCart","title","innerHTML","style","left","setUnitItem","id","NEW_CART","find","deleteItem","ITEM","filter","intoCart","emptyCart","addItem","item","push","i"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Nav from '../components/Nav';\r\nimport Cart from '../components/Cart';\r\nimport ItemList from '../components/ItemList';\r\nimport ITEMS_DB from '../js/constants';\r\n\r\nconst Index = () => {\r\n    const [shoppingCart,setShoppingCart] = useState([]);\r\n    const [totalPrice,setTotalPrice] = useState( shoppingCart.length == 0 ? \"0.00\" : shoppingCart.map( e => e.price*e.ud ).reduce( (e,acc) => e+acc ).toFixed(2) );\r\n\r\n    useEffect( () => {\r\n        const totalItems = document.getElementById(\"cart-count\");\r\n        const priceCart  = document.getElementById(\"totalPrice\");\r\n        document.title   = \"Amazon.fake\";\r\n\r\n        totalItems.innerHTML = shoppingCart.length;\r\n        totalItems.style.left = (shoppingCart.length > 9 ? `21px` : `25px`);\r\n\r\n        setTotalPrice( shoppingCart.length == 0 ? \"0.00\" : shoppingCart.map( e => e.price*e.ud ).reduce( (e,acc) => e+acc ).toFixed(2) );\r\n        \r\n        priceCart.innerHTML = `Total a pagar: ${totalPrice}€`;\r\n    });\r\n\r\n    const setUnitItem = (id,ud) => {\r\n        const NEW_CART = [...shoppingCart];\r\n        NEW_CART.find( e => e.id == id ).ud = ud;\r\n        //shoppingCart.filter( e => e.id == id )[0].ud = ud;\r\n        //setShoppingCart( shoppingCart );\r\n        setShoppingCart( NEW_CART );\r\n        //setTotalPrice( shoppingCart.length == 0 ? \"0.00\" : shoppingCart.map( e => e.price*e.ud ).reduce( (e,acc) => e+acc ).toFixed(2) );\r\n    }\r\n\r\n    const deleteItem = id => { \r\n        const ITEM = ITEMS_DB.find( e => e.id == id );\r\n        setShoppingCart( shoppingCart.filter( e => e.id !== id ) );\r\n        setTotalPrice( (totalPrice - shoppingCart.filter( e => e.id == id ).map( e => e.price*e.ud )).toFixed(2) );\r\n        ITEM.ud       = 1;\r\n        ITEM.intoCart = false;\r\n    }\r\n\r\n    const emptyCart = () => {\r\n        shoppingCart.map( e => deleteItem(e.id) );\r\n        setShoppingCart([]);\r\n        setTotalPrice(\"0.00\");\r\n    }\r\n\r\n    const addItem = item => {\r\n        ITEMS_DB.find( e => e.id == item.id ).intoCart = true;\r\n        shoppingCart.push( ITEMS_DB.filter( e => e.id == item.id )[0] ); //No sé la razón, pero si no hago este push el array no se actualiza a tiempo y el precio no cambia, porqué ocurre esto???\r\n        setShoppingCart( shoppingCart );\r\n        setTotalPrice( shoppingCart.map( e => e.price*e.ud ).reduce( (e,acc) => e+acc ).toFixed(2) );\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div>\r\n                <Nav />\r\n                <Cart cart={shoppingCart} deleteItem={deleteItem} setUnitItem={setUnitItem} emptyCart={emptyCart} />\r\n            </div>\r\n            <div className=\"main-container scroll\">\r\n                <div className=\"container-list\">\r\n                    {\r\n                        ITEMS_DB.map( (e,i) => <ItemList db={ITEMS_DB} item={e} key={e.id} id={e.id} addItem={addItem} /> )\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n    )\r\n}\r\n\r\nexport default Index;"]},"metadata":{},"sourceType":"module"}