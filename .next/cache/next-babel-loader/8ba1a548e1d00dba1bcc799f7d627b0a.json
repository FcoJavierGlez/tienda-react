{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport Nav from '../components/Nav';\nimport Cart from '../components/Cart';\nimport ItemList from '../components/ItemList';\nimport ITEMS_DB from '../js/constants';\n\nvar Index = function Index() {\n  var _useState = useState([]),\n      shoppingCart = _useState[0],\n      setShoppingCart = _useState[1];\n\n  var _useState2 = useState(shoppingCart.length == 0 ? \"0.00\" : shoppingCart.map(function (e) {\n    return e.price * e.ud;\n  }).reduce(function (e, acc) {\n    return e + acc;\n  }).toFixed(2)),\n      totalPrice = _useState2[0],\n      setTotalPrice = _useState2[1];\n\n  useEffect(function () {\n    var totalItems = document.getElementById(\"cart-count\");\n    var priceCart = document.getElementById(\"totalPrice\");\n    document.title = \"Amazon.fake\";\n    totalItems.innerHTML = shoppingCart.length;\n    totalItems.style.left = shoppingCart.length > 9 ? \"21px\" : \"25px\";\n    setTotalPrice(shoppingCart.length == 0 ? \"0.00\" : shoppingCart.map(function (e) {\n      return e.price * e.ud;\n    }).reduce(function (e, acc) {\n      return e + acc;\n    }).toFixed(2));\n    priceCart.innerHTML = \"Total a pagar: \".concat(totalPrice, \"\\u20AC\");\n  });\n\n  var setUnitItem = function setUnitItem(id, ud) {\n    var NEW_CART = _toConsumableArray(shoppingCart);\n\n    NEW_CART.find(function (e) {\n      return e.id == id;\n    }).ud = ud;\n    setShoppingCart(NEW_CART);\n  };\n\n  var deleteItem = function deleteItem(id) {\n    var ITEM = ITEMS_DB.find(function (e) {\n      return e.id == id;\n    });\n    setShoppingCart(shoppingCart.filter(function (e) {\n      return e.id !== id;\n    }));\n    ITEM.ud = 1;\n    ITEM.intoCart = false;\n  };\n\n  var emptyCart = function emptyCart() {\n    shoppingCart.map(function (e) {\n      return deleteItem(e.id);\n    });\n    setShoppingCart([]);\n  };\n\n  var addItem = function addItem(item) {\n    var NEW_CART = _toConsumableArray(shoppingCart);\n\n    NEW_CART.push(ITEMS_DB.find(function (e) {\n      return e.id == item.id;\n    }));\n    ITEMS_DB.find(function (e) {\n      return e.id == item.id;\n    }).intoCart = true;\n    setShoppingCart(NEW_CART);\n  };\n\n  return __jsx(\"div\", null, __jsx(\"div\", null, __jsx(Nav, null), __jsx(Cart, {\n    cart: shoppingCart,\n    deleteItem: deleteItem,\n    setUnitItem: setUnitItem,\n    emptyCart: emptyCart\n  })), __jsx(\"div\", {\n    className: \"main-container scroll\"\n  }, __jsx(\"div\", {\n    className: \"container-list\"\n  }, ITEMS_DB.map(function (e) {\n    return __jsx(ItemList, {\n      db: ITEMS_DB,\n      item: e,\n      key: e.id,\n      id: e.id,\n      addItem: addItem\n    });\n  }))));\n};\n\nexport default Index;","map":null,"metadata":{},"sourceType":"module"}