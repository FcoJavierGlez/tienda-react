{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\FJGS_\\\\OneDrive\\\\Desktop\\\\tienda_react\\\\pages\\\\index.js\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport Nav from '../components/Nav';\nimport Cart from '../components/Cart';\nimport ItemList from '../components/ItemList';\nimport ITEMS_DB from '../js/constants';\n\nconst Index = () => {\n  const {\n    0: shoppingCart,\n    1: setShoppingCart\n  } = useState([]);\n  const {\n    0: totalPrice,\n    1: setTotalPrice\n  } = useState(shoppingCart.length == 0 ? \"0.00\" : shoppingCart.map(e => e.price * e.ud).reduce((e, acc) => e + acc).toFixed(2));\n  useEffect(() => {\n    const totalItems = document.getElementById(\"cart-count\");\n    const priceCart = document.getElementById(\"totalPrice\");\n    document.title = \"Amazon.fake\";\n    totalItems.innerHTML = shoppingCart.length;\n    totalItems.style.left = shoppingCart.length > 9 ? `21px` : `25px`;\n    priceCart.innerHTML = `Total a pagar: ${totalPrice}€`;\n  });\n\n  const setUnitItem = (id, ud) => {\n    const NEW_CART = [...shoppingCart];\n    NEW_CART.find(e => e.id == id).ud = ud; //shoppingCart.filter( e => e.id == id )[0].ud = ud;\n    //setShoppingCart( shoppingCart );\n\n    setShoppingCart(NEW_CART);\n    setTotalPrice(shoppingCart.length == 0 ? \"0.00\" : shoppingCart.map(e => e.price * e.ud).reduce((e, acc) => e + acc).toFixed(2));\n  };\n\n  const deleteItem = id => {\n    const ITEM = ITEMS_DB.find(e => e.id == id);\n    setShoppingCart(shoppingCart.filter(e => e.id !== id));\n    setTotalPrice((totalPrice - shoppingCart.filter(e => e.id == id).map(e => e.price * e.ud)).toFixed(2));\n    ITEM.ud = 1;\n    ITEM.intoCart = false;\n  };\n\n  const emptyCart = () => {\n    shoppingCart.map(e => deleteItem(e.id));\n    setShoppingCart([]);\n    setTotalPrice(\"0.00\");\n  };\n\n  const addItem = item => {\n    const NEW_CART = [...shoppingCart, ITEMS_DB.find(e => e.id == item.id)];\n    console.log(NEW_CART);\n    ITEMS_DB.find(e => e.id == item.id).intoCart = true; //shoppingCart.push( ITEMS_DB.filter( e => e.id == item.id )[0] ); //No sé la razón, pero si no hago este push el array no se actualiza a tiempo y el precio no cambia, porqué ocurre esto???\n\n    setShoppingCart(NEW_CART);\n    setTotalPrice(shoppingCart.map(e => e.price * e.ud).reduce((e, acc) => e + acc).toFixed(2));\n    setTotalPrice(totalPrice + shoppingCart.map(e => e.id == item.id ? item.price : 0));\n  };\n\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }, __jsx(Nav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }), __jsx(Cart, {\n    cart: shoppingCart,\n    deleteItem: deleteItem,\n    setUnitItem: setUnitItem,\n    emptyCart: emptyCart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 17\n    }\n  })), __jsx(\"div\", {\n    className: \"main-container scroll\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"container-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, ITEMS_DB.map((e, i) => __jsx(ItemList, {\n    db: ITEMS_DB,\n    item: e,\n    key: e.id,\n    id: e.id,\n    addItem: addItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 48\n    }\n  })))));\n};\n\nexport default Index;","map":{"version":3,"sources":["C:/Users/FJGS_/OneDrive/Desktop/tienda_react/pages/index.js"],"names":["React","useEffect","useState","Nav","Cart","ItemList","ITEMS_DB","Index","shoppingCart","setShoppingCart","totalPrice","setTotalPrice","length","map","e","price","ud","reduce","acc","toFixed","totalItems","document","getElementById","priceCart","title","innerHTML","style","left","setUnitItem","id","NEW_CART","find","deleteItem","ITEM","filter","intoCart","emptyCart","addItem","item","console","log","i"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Nav from '../components/Nav';\r\nimport Cart from '../components/Cart';\r\nimport ItemList from '../components/ItemList';\r\nimport ITEMS_DB from '../js/constants';\r\n\r\nconst Index = () => {\r\n    const [shoppingCart,setShoppingCart] = useState([]);\r\n    const [totalPrice,setTotalPrice] = useState( shoppingCart.length == 0 ? \"0.00\" : shoppingCart.map( e => e.price*e.ud ).reduce( (e,acc) => e+acc ).toFixed(2) );\r\n\r\n    useEffect( () => {\r\n        const totalItems = document.getElementById(\"cart-count\");\r\n        const priceCart  = document.getElementById(\"totalPrice\");\r\n        document.title   = \"Amazon.fake\";\r\n\r\n        totalItems.innerHTML = shoppingCart.length;\r\n        totalItems.style.left = (shoppingCart.length > 9 ? `21px` : `25px`);\r\n        \r\n        priceCart.innerHTML = `Total a pagar: ${totalPrice}€`;\r\n    });\r\n\r\n    const setUnitItem = (id,ud) => {\r\n        const NEW_CART = [...shoppingCart];\r\n        NEW_CART.find( e => e.id == id ).ud = ud;\r\n        //shoppingCart.filter( e => e.id == id )[0].ud = ud;\r\n        //setShoppingCart( shoppingCart );\r\n        setShoppingCart( NEW_CART );\r\n        setTotalPrice( shoppingCart.length == 0 ? \"0.00\" : shoppingCart.map( e => e.price*e.ud ).reduce( (e,acc) => e+acc ).toFixed(2) );\r\n    }\r\n\r\n    const deleteItem = id => { \r\n        const ITEM = ITEMS_DB.find( e => e.id == id );\r\n        setShoppingCart( shoppingCart.filter( e => e.id !== id ) );\r\n        setTotalPrice( (totalPrice - shoppingCart.filter( e => e.id == id ).map( e => e.price*e.ud )).toFixed(2) );\r\n        ITEM.ud       = 1;\r\n        ITEM.intoCart = false;\r\n    }\r\n\r\n    const emptyCart = () => {\r\n        shoppingCart.map( e => deleteItem(e.id) );\r\n        setShoppingCart([]);\r\n        setTotalPrice(\"0.00\");\r\n    }\r\n\r\n    const addItem = item => {\r\n        const NEW_CART = [...shoppingCart,ITEMS_DB.find( e => e.id == item.id )];\r\n        console.log(NEW_CART);\r\n        ITEMS_DB.find( e => e.id == item.id ).intoCart = true;\r\n        //shoppingCart.push( ITEMS_DB.filter( e => e.id == item.id )[0] ); //No sé la razón, pero si no hago este push el array no se actualiza a tiempo y el precio no cambia, porqué ocurre esto???\r\n\r\n        setShoppingCart( NEW_CART );\r\n        setTotalPrice( shoppingCart.map( e => e.price*e.ud ).reduce( (e,acc) => e+acc ).toFixed(2) );\r\n        setTotalPrice( totalPrice + shoppingCart.map( e => e.id == item.id ? item.price : 0) );\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div>\r\n                <Nav />\r\n                <Cart cart={shoppingCart} deleteItem={deleteItem} setUnitItem={setUnitItem} emptyCart={emptyCart} />\r\n            </div>\r\n            <div className=\"main-container scroll\">\r\n                <div className=\"container-list\">\r\n                    {\r\n                        ITEMS_DB.map( (e,i) => <ItemList db={ITEMS_DB} item={e} key={e.id} id={e.id} addItem={addItem} /> )\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n    )\r\n}\r\n\r\nexport default Index;"]},"metadata":{},"sourceType":"module"}